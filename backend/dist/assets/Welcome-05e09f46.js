import{_ as h,o as a,c as r,a as e,t as m,i as n,b as d,v as u,w as p,f,F as c}from"./index-52f96a46.js";const g={data(){return{showDeleteModal:!1,emailToDelete:"",errorMessage:"",successMessage:"",showEditModal:!1,profileData:{firstName:"",lastName:"",email:"",password:""},showEmailModal:!1,emailToShowDetails:"",userData:null,showUserData:!1}},methods:{goToMyProfile(){this.$router.push({name:"EditProfile"})},logout(){this.$router.push({name:"LogIn"})},confirmDeleteProfile(){this.showDeleteModal=!0},closeModal(){this.showDeleteModal=!1,this.emailToDelete=""},deleteProfile(){this.emailToDelete.trim()!==""&&fetch(`http://localhost:3000/api/delete/${this.emailToDelete}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(i=>{i.ok?(this.successMessage="Profilen är nu raderad",setTimeout(()=>{this.successMessage="",this.closeModal()},1e3)):i.status===404?(this.errorMessage="Profilen finns inte",setTimeout(()=>{this.errorMessage=""},1e3)):console.error("Error deleting profile:",i.status)}).catch(i=>{console.error("Error:",i)})},openEditModal(){this.showEditModal=!0},saveProfileChanges(){fetch("http://localhost:3000/api/profile/update",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:this.profileData.firstName,lastName:this.profileData.lastName,email:this.profileData.email,password:this.profileData.password})}).then(i=>{i.ok?(this.successMessage="Profilen är nu ändrad",setTimeout(()=>{this.showEditModal=!1,this.successMessage=""},4e3)):(this.errorMessage="Profilen finns inte",setTimeout(()=>{this.showEditModal=!1,this.errorMessage=""},4e3))}).catch(i=>{console.error("Error updating profile:",i)})},closeEditModal(){this.showEditModal=!1},showUserDetails(){this.showEmailModal=!0},closeEmailModal(){this.showEmailModal=!1,this.emailToShowDetails=""},getUserDetails(){fetch(`http://localhost:3000/api/profile/${this.emailToShowDetails}`).then(i=>{if(i.ok)return i.json();throw new Error("Failed to fetch user details")}).then(i=>{this.userData=i,this.showUserData=!0,setTimeout(()=>{this.showEmailModal=!1,this.emailToShowDetails="",this.userData=null},4e3)}).catch(i=>{console.error("Error fetching user details:",i)})}}},D=e("h2",null,"Välkommen!",-1),M={class:"vertical-buttons"},w={key:0,class:"success-message"},_={key:1,class:"error-message"},E={key:2,class:"modal"},v={class:"modal-content"},T=e("p",null,"Ange din e-postadress:",-1),k={key:3,class:"modal"},y={class:"modal-content"},N=e("h3",null,"Ändra profil",-1),P={class:"form-group"},b=e("label",{for:"firstName"},"Förnamn:",-1),C={class:"form-group"},U=e("label",{for:"lastName"},"Efternamn:",-1),V={class:"form-group"},S=e("label",{for:"email"},"E-post:",-1),x={class:"form-group"},F=e("label",{for:"password"},"Lösenord:",-1),B=e("div",{class:"form-group"},[e("button",{type:"submit"},"Spara ändringar")],-1),L={key:0,class:"modal"},j={class:"modal-content"},A=e("p",null,"Ange din e-postadress:",-1),W={key:0},I=e("h3",null,"Användaruppgifter",-1),J=e("strong",null,"Förnamn:",-1),O=e("strong",null,"Efternamn:",-1),R=e("strong",null,"E-post:",-1);function q(i,s,z,G,t,l){return a(),r(c,null,[e("div",null,[D,e("div",M,[e("button",{onClick:s[0]||(s[0]=(...o)=>l.goToMyProfile&&l.goToMyProfile(...o))},"Min profil"),e("button",{onClick:s[1]||(s[1]=(...o)=>l.showUserDetails&&l.showUserDetails(...o))},"Visa mina uppgifter"),e("button",{onClick:s[2]||(s[2]=(...o)=>l.openEditModal&&l.openEditModal(...o))},"Ändra profil"),e("button",{onClick:s[3]||(s[3]=(...o)=>l.confirmDeleteProfile&&l.confirmDeleteProfile(...o))},"Radera profil"),e("button",{onClick:s[4]||(s[4]=(...o)=>l.logout&&l.logout(...o))},"Logga ut")]),t.successMessage?(a(),r("div",w,m(t.successMessage),1)):n("",!0),t.errorMessage?(a(),r("div",_,m(t.errorMessage),1)):n("",!0),t.showDeleteModal?(a(),r("div",E,[e("div",v,[e("span",{class:"close",onClick:s[5]||(s[5]=(...o)=>l.closeModal&&l.closeModal(...o))},"×"),T,d(e("input",{type:"email","onUpdate:modelValue":s[6]||(s[6]=o=>t.emailToDelete=o)},null,512),[[u,t.emailToDelete]]),e("button",{onClick:s[7]||(s[7]=(...o)=>l.deleteProfile&&l.deleteProfile(...o))},"Bekräfta")])])):n("",!0),t.showEditModal?(a(),r("div",k,[e("div",y,[e("span",{class:"close",onClick:s[8]||(s[8]=(...o)=>l.closeEditModal&&l.closeEditModal(...o))},"×"),N,e("form",{onSubmit:s[13]||(s[13]=p((...o)=>l.saveProfileChanges&&l.saveProfileChanges(...o),["prevent"])),class:"vertical-form"},[e("div",P,[b,d(e("input",{type:"text",id:"firstName","onUpdate:modelValue":s[9]||(s[9]=o=>t.profileData.firstName=o)},null,512),[[u,t.profileData.firstName]])]),e("div",C,[U,d(e("input",{type:"text",id:"lastName","onUpdate:modelValue":s[10]||(s[10]=o=>t.profileData.lastName=o)},null,512),[[u,t.profileData.lastName]])]),e("div",V,[S,d(e("input",{type:"email",id:"email","onUpdate:modelValue":s[11]||(s[11]=o=>t.profileData.email=o)},null,512),[[u,t.profileData.email]])]),e("div",x,[F,d(e("input",{type:"password",id:"password","onUpdate:modelValue":s[12]||(s[12]=o=>t.profileData.password=o)},null,512),[[u,t.profileData.password]])]),B],32)])])):n("",!0)]),t.showEmailModal?(a(),r("div",L,[e("div",j,[e("span",{class:"close",onClick:s[14]||(s[14]=(...o)=>l.closeEmailModal&&l.closeEmailModal(...o))},"×"),A,d(e("input",{type:"email","onUpdate:modelValue":s[15]||(s[15]=o=>t.emailToShowDetails=o)},null,512),[[u,t.emailToShowDetails]]),e("button",{onClick:s[16]||(s[16]=(...o)=>l.getUserDetails&&l.getUserDetails(...o))},"Visa"),t.showUserData&&t.userData?(a(),r("div",W,[I,e("div",null,[e("p",null,[J,f(" "+m(t.userData.first_name),1)]),e("p",null,[O,f(" "+m(t.userData.last_name),1)]),e("p",null,[R,f(" "+m(t.userData.email),1)])])])):n("",!0)])])):n("",!0)],64)}const K=h(g,[["render",q]]);export{K as default};
