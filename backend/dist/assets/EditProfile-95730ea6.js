import{_ as c,o as r,c as n,a as e,b as f,v as m,f as h,t as u,i as d,w as p,p as D,g as M}from"./index-cf1cf46c.js";const g={data(){return{showDeleteModal:!1,emailToDelete:"",errorMessage:"",successMessage:"",showEditModal:!1,profileData:{firstName:"",lastName:"",email:"",password:""},showEmailModal:!1,emailToShowDetails:"",userData:null,showUserData:!1}},methods:{confirmDeleteProfile(){this.showDeleteModal=!0},closeModal(){this.showDeleteModal=!1,this.emailToDelete=""},showUserDetails(){this.showEmailModal=!0},closeEmailModal(){this.showEmailModal=!1,this.emailToShowDetails=""},getUserDetails(){fetch(`http://localhost:3000/api/profile/${this.emailToShowDetails}`).then(l=>{if(l.ok)return l.json();throw new Error("Failed to fetch user details")}).then(l=>{this.userData=l,this.showUserData=!0,setTimeout(()=>{this.showEmailModal=!1,this.emailToShowDetails="",this.userData=null},4e3)}).catch(l=>{console.error("Error fetching user details:",l)})},saveProfileChanges(){fetch("http://localhost:3000/api/profile/update",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:this.profileData.firstName,lastName:this.profileData.lastName,email:this.profileData.email,password:this.profileData.password})}).then(l=>{l.ok?(this.successMessage="Profilen är nu ändrad",setTimeout(()=>{this.showEditModal=!1,this.successMessage=""},4e3)):(this.errorMessage="Profilen finns inte",setTimeout(()=>{this.showEditModal=!1,this.errorMessage=""},4e3))}).catch(l=>{console.error("Error updating profile:",l)})},closeEditModal(){this.showEditModal=!1},showUserDetails(){this.showEmailModal=!0},closeEmailModal(){this.showEmailModal=!1,this.emailToShowDetails=""},openEditModal(){this.showEditModal=!0},deleteProfile(){this.emailToDelete.trim()!==""&&fetch(`http://localhost:3000/api/delete/${this.emailToDelete}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(l=>{l.ok?(this.successMessage="Profilen är nu raderad",setTimeout(()=>{this.successMessage="",this.closeModal()},1e3)):l.status===404?(this.errorMessage="Profilen finns inte",setTimeout(()=>{this.errorMessage=""},1e3)):console.error("Error deleting profile:",l.status)}).catch(l=>{console.error("Error:",l)})}}},a=l=>(D("data-v-fd31cfa0"),l=l(),M(),l),w={key:0,class:"modal"},_={class:"modal-content"},E=a(()=>e("p",null,"Ange din e-postadress:",-1)),v={key:0},T=a(()=>e("h3",null,"Användaruppgifter",-1)),k=a(()=>e("strong",null,"Förnamn:",-1)),y=a(()=>e("strong",null,"Efternamn:",-1)),U=a(()=>e("strong",null,"E-post:",-1)),N={key:1,class:"modal"},P={class:"modal-content"},b=a(()=>e("h3",null,"Ändra profil",-1)),S={class:"form-group"},C=a(()=>e("label",{for:"firstName"},"Förnamn:",-1)),V={class:"form-group"},x=a(()=>e("label",{for:"lastName"},"Efternamn:",-1)),B={class:"form-group"},I=a(()=>e("label",{for:"email"},"E-post:",-1)),j={class:"form-group"},A=a(()=>e("label",{for:"password"},"Lösenord:",-1)),F={class:"form-group"},L=a(()=>e("button",{type:"submit"},"Spara ändringar",-1)),J={key:0,class:"success-message"},O={key:1,class:"error-message"},R={key:2,class:"modal"},q={class:"modal-content"},z=a(()=>e("p",null,"Ange din e-postadress:",-1)),G={key:0,class:"success-message"},H={key:1,class:"error-message"};function K(l,s,Q,W,t,i){return r(),n("form",{onSubmit:s[15]||(s[15]=p((...o)=>l.updateUserProfile&&l.updateUserProfile(...o),["prevent"]))},[e("button",{onClick:s[0]||(s[0]=(...o)=>i.showUserDetails&&i.showUserDetails(...o))},"Visa mina uppgifter"),t.showEmailModal?(r(),n("div",w,[e("div",_,[e("span",{class:"close",onClick:s[1]||(s[1]=(...o)=>i.closeEmailModal&&i.closeEmailModal(...o))},"×"),E,f(e("input",{type:"email","onUpdate:modelValue":s[2]||(s[2]=o=>t.emailToShowDetails=o)},null,512),[[m,t.emailToShowDetails]]),e("button",{onClick:s[3]||(s[3]=(...o)=>i.getUserDetails&&i.getUserDetails(...o))},"Visa"),t.showUserData&&t.userData?(r(),n("div",v,[T,e("div",null,[e("p",null,[k,h(" "+u(t.userData.first_name),1)]),e("p",null,[y,h(" "+u(t.userData.last_name),1)]),e("p",null,[U,h(" "+u(t.userData.email),1)])])])):d("",!0)])])):d("",!0),e("button",{onClick:s[4]||(s[4]=(...o)=>i.openEditModal&&i.openEditModal(...o))},"Uppdatera profil"),t.showEditModal?(r(),n("div",N,[e("div",P,[e("span",{class:"close",onClick:s[5]||(s[5]=(...o)=>i.closeEditModal&&i.closeEditModal(...o))},"×"),b,e("form",{onSubmit:s[10]||(s[10]=p((...o)=>i.saveProfileChanges&&i.saveProfileChanges(...o),["prevent"])),class:"vertical-form"},[e("div",S,[C,f(e("input",{type:"text",id:"firstName","onUpdate:modelValue":s[6]||(s[6]=o=>t.profileData.firstName=o)},null,512),[[m,t.profileData.firstName]])]),e("div",V,[x,f(e("input",{type:"text",id:"lastName","onUpdate:modelValue":s[7]||(s[7]=o=>t.profileData.lastName=o)},null,512),[[m,t.profileData.lastName]])]),e("div",B,[I,f(e("input",{type:"email",id:"email","onUpdate:modelValue":s[8]||(s[8]=o=>t.profileData.email=o)},null,512),[[m,t.profileData.email]])]),e("div",j,[A,f(e("input",{type:"password",id:"password","onUpdate:modelValue":s[9]||(s[9]=o=>t.profileData.password=o)},null,512),[[m,t.profileData.password]])]),e("div",F,[L,t.successMessage?(r(),n("div",J,u(t.successMessage),1)):d("",!0),t.errorMessage?(r(),n("div",O,u(t.errorMessage),1)):d("",!0)])],32)])])):d("",!0),e("button",{class:"delete",onClick:s[11]||(s[11]=(...o)=>i.confirmDeleteProfile&&i.confirmDeleteProfile(...o))},"Radera mitt konto"),t.showDeleteModal?(r(),n("div",R,[e("div",q,[e("span",{class:"close",onClick:s[12]||(s[12]=(...o)=>i.closeModal&&i.closeModal(...o))},"×"),z,f(e("input",{type:"email","onUpdate:modelValue":s[13]||(s[13]=o=>t.emailToDelete=o)},null,512),[[m,t.emailToDelete]]),e("button",{onClick:s[14]||(s[14]=(...o)=>i.deleteProfile&&i.deleteProfile(...o))},"Bekräfta"),t.successMessage?(r(),n("div",G,u(t.successMessage),1)):d("",!0),t.errorMessage?(r(),n("div",H,u(t.errorMessage),1)):d("",!0)])])):d("",!0)],32)}const Y=c(g,[["render",K],["__scopeId","data-v-fd31cfa0"]]);export{Y as default};
